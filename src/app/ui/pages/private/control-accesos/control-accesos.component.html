<mg-title title="Control y accesos"></mg-title>

<form [formGroup]="form">
  <div class="w-full flex items-center justify-between gap-2">
    <mg-input-text
      class="w-full"
      type="text"
      formControlName="usuario"
      id="user"
      label="Documento de identidad"
    ></mg-input-text>
    <mat-icon
      class="cursor-pointer"
      (click)="getPerfil()"
      (keydown)="getPerfil()"
      >search</mat-icon
    >
  </div>
  <mg-input-select
    class="w-full"
    formControlName="rol"
    [label]="perfilSeleted ? 'Asignar rol a ' + perfilSeleted!.nombres + ' ' + perfilSeleted!.apellidos : 'Usuario no seleccionado'"
    id="rol"
    [items]="rolesSelectOptions"
  ></mg-input-select>
  <div class="flex flex-row-reverse justify-center gap-4 sm:pt-5 lg:pt-8">
    <mg-button
      [text]="'Asignar rol'"
      [loading]="loading"
      [disabled]="form.invalid || perfilSeleted == undefined"
      (onClick)="asignarRol()"
    ></mg-button>
    <mg-button
      [text]="'Limpiar'"
      [type]="'reset'"
      (onClick)="clear()"
    ></mg-button>
  </div>
</form>

<div class="mt-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <lida-person-card
    *ngFor="let user of usuarios"
    [person]="user"
    [showDeleteAction]="user.rol !== 'Sin rol asignado'"
    (deleteClicked)="deleteRol(user.id!)"
  ></lida-person-card>
</div>


