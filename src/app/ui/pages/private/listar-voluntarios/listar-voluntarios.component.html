<div class="p-6">
  <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
    <mg-title title="Voluntarios de mi zona"></mg-title>

    <div class="w-full md:w-1/3">
      <mg-input-text class="w-full" label="Buscar por nombre o documento" [formControl]="searchControl"
        placeholder="Buscar..." type="text">
      </mg-input-text>
    </div>
  </div>

  <!-- Mobile View: Cards -->
  <div class="block md:hidden flex flex-col gap-4">
    <div class="relative" *ngFor="let voluntarios of paginatedVoluntarios">
      <mtt-card-info [title]="voluntarios.nombres + ' ' + voluntarios.apellidos"
        [textInfo]="(voluntarios.rol ? voluntarios.rol : '')" icon="person" [activePoint]="false"></mtt-card-info>
      <button *ngIf="usuario.rol === 'Super usuario'" (click)="abrirModalEliminar(voluntarios)"
        class="absolute top-4 right-4 text-red-500 bg-white rounded-full p-1 shadow hover:bg-red-50 transition-colors">
        <mat-icon>delete</mat-icon>
      </button>
    </div>

    <div *ngIf="paginatedVoluntarios.length === 0" class="text-center p-4 text-gray-500 bg-white rounded-lg shadow">
      No se encontraron voluntarios que coincidan con la búsqueda.
    </div>
  </div>

  <!-- Desktop View: Table -->
  <div class="hidden md:block overflow-auto rounded-lg shadow bg-white mb-4">
    <table mat-table [dataSource]="paginatedVoluntarios" class="w-full">

      <!-- Nombres Column -->
      <ng-container matColumnDef="nombres">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Nombres </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.nombres}} </td>
      </ng-container>

      <!-- Apellidos Column -->
      <ng-container matColumnDef="apellidos">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Apellidos </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.apellidos}} </td>
      </ng-container>

      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Email </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.email}} </td>
      </ng-container>

      <!-- Rol Column -->
      <ng-container matColumnDef="rol">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Rol </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.rol}} </td>
      </ng-container>

      <!-- Celular Column -->
      <ng-container matColumnDef="celular">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Celular </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.celular}} </td>
      </ng-container>

      <!-- No. Cuenta Column -->
      <ng-container matColumnDef="noCuenta">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> No. Cuenta </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b"> {{element.noCuenta}} </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2 bg-gray-100 font-bold text-gray-700"> Acciones </th>
        <td mat-cell *matCellDef="let element" class="px-4 py-2 border-b">
          <button *ngIf="usuario.rol === 'Super usuario' || usuario.rol === 'Pastor'"
            (click)="abrirModalEliminar(element)"
            class="text-red-500 hover:text-red-700 transition-colors flex items-center justify-center">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50"></tr>
    </table>
    <div *ngIf="paginatedVoluntarios.length === 0" class="text-center p-4 text-gray-500">
      No se encontraron voluntarios que coincidan con la búsqueda.
    </div>
  </div>

  <mg-paginator [length]="dataSource.filteredData.length" [pageSize]="pageSize" [pageIndex]="pageIndex"
    [pageSizeOptions]="pageSizeOptions" (page)="onPageChange($event)">
  </mg-paginator>

  <lida-confirm-action *ngIf="showModal" [showModal]="true" [data]="dataModal"
    (eventConfirm)="confirmarEliminacion(dataModal.id)" (eventBack)="showModal = false"></lida-confirm-action>
  <app-spinner [showSpinner]="showSpinner"></app-spinner>
</div>