<div class="fixed inset-0 z-50 flex justify-start" *ngIf="isOpen">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black bg-opacity-50" (click)="close.emit()"></div>

    <!-- Panel -->
    <div class="relative w-80 bg-white h-full shadow-xl flex flex-col z-50 animate-slide-in-left">

        <!-- Header -->
        <div class="p-4 bg-primary text-white flex justify-between items-center shadow-md">
            <div class="flex flex-col">
                <span class="font-bold text-lg tracking-wide">Menú</span>
                <span class="text-xs opacity-90 font-light truncate max-w-[200px]"
                    *ngIf="usuario">{{usuario.email}}</span>
                <span
                    class="text-xs opacity-90 font-light truncate max-w-[200px] mt-1 font-mono bg-white/10 px-2 py-0.5 rounded"
                    *ngIf="usuario?.noCuenta">ID: {{usuario.noCuenta}}</span>
            </div>
            <button class="hover:bg-white/20 rounded-full p-1 transition-colors" (click)="close.emit()">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <!-- Body (Scrollable) -->
        <div class="flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent">
            <ul class="space-y-1">
                <ng-container *ngFor="let card of cards">
                    <li *ngIf="showCard(card.showIf, card.requiresPostulacion)">
                        <!-- Action Item -->
                        <div *ngIf="card.action" (click)="handleClick(card)"
                            class="group flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer text-gray-700 transition-all border border-transparent hover:border-gray-100 hover:shadow-sm">
                            <div
                                class="p-2 bg-gray-100 rounded-lg group-hover:bg-white group-hover:shadow-sm transition-all text-primary">
                                <mat-icon class="scale-90">{{card.icon}}</mat-icon>
                            </div>
                            <div class="flex flex-col">
                                <span class="font-semibold text-sm text-gray-800">{{card.title}}</span>
                                <span class="text-[0.65rem] text-gray-500 leading-tight">{{card.description}}</span>
                            </div>
                        </div>

                        <!-- Link Item -->
                        <a *ngIf="!card.action && card.goTo" [routerLink]="[card.goTo]" (click)="handleClick(card)"
                            routerLinkActive="bg-blue-50 border-blue-100 shadow-sm"
                            class="group flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer text-gray-700 transition-all border border-transparent hover:border-gray-100 hover:shadow-sm">
                            <div
                                class="p-2 bg-gray-100 rounded-lg group-hover:bg-white group-hover:shadow-sm transition-all text-primary">
                                <mat-icon class="scale-90">{{card.icon}}</mat-icon>
                            </div>
                            <div class="flex flex-col">
                                <span class="font-semibold text-sm text-gray-800">{{card.title}}</span>
                                <span class="text-[0.65rem] text-gray-500 leading-tight">{{card.description}}</span>
                            </div>
                        </a>
                    </li>
                </ng-container>
            </ul>
        </div>

        <!-- Footer -->
        <div class="p-4 border-t border-gray-100 bg-gray-50">
            <button (click)="logout()"
                class="flex items-center justify-center gap-2 w-full p-3 text-red-600 hover:bg-red-50 hover:shadow-sm bg-white border border-gray-200 rounded-xl transition-all font-medium text-sm">
                <mat-icon class="scale-90">exit_to_app</mat-icon>
                <span>Cerrar sesión</span>
            </button>
        </div>

    </div>
</div>